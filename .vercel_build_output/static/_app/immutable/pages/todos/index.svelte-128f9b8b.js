import{a2 as Z,S as re,i as ue,s as de,e as m,k as N,c as g,a as P,m as O,d as T,b as a,J as ne,g as x,K as d,a3 as Q,a4 as ce,a5 as he,a6 as _e,T as fe,U as le,W as pe,t as ve,Q as me,h as ge,a7 as be,p as ye,q as Te,o as Ee,n as ke,a8 as we,E as Ue}from"../../chunks/index-cffa86d9.js";import{c as B}from"../../chunks/singletons-d1fb5791.js";import{c as Me,a as se}from"../../chunks/index-8a73ca44.js";B.disable_scroll_handling;B.goto;const Ne=B.invalidate;B.prefetch;B.prefetch_routes;B.before_navigate;B.after_navigate;function W(c,{pending:e,error:t,result:n}={}){let h;async function y(v){const i=h={};v.preventDefault();const u=new FormData(c);e&&e({data:u,form:c});try{const _=await fetch(c.action,{method:c.method,headers:{accept:"application/json"},body:u});if(i!==h)return;if(_.ok){n&&n({data:u,form:c,response:_});const s=new URL(c.action);s.search=s.hash="",Ne(s.href)}else t?t({data:u,form:c,error:null,response:_}):console.error(await _.text())}catch(_){if(t&&_ instanceof Error)t({data:u,form:c,error:_,response:null});else throw _}}return c.addEventListener("submit",y),{destroy(){c.removeEventListener("submit",y)}}}function Oe(c,{from:e,to:t},n={}){const h=getComputedStyle(c),y=h.transform==="none"?"":h.transform,[v,i]=h.transformOrigin.split(" ").map(parseFloat),u=e.left+e.width*v/t.width-(t.left+v),_=e.top+e.height*i/t.height-(t.top+i),{delay:s=0,duration:w=k=>Math.sqrt(k)*120,easing:U=Me}=n;return{delay:s,duration:Z(w)?w(Math.sqrt(u*u+_*_)):w,easing:U,css:(k,f)=>{const b=f*u,D=f*_,o=k+f*e.width/t.width,l=k+f*e.height/t.height;return`transform: ${y} translate(${b}px, ${D}px) scale(${o}, ${l});`}}}function oe(c,e,t){const n=c.slice();return n[3]=e[t],n[4]=e,n[5]=t,n}function ie(c,e){let t,n,h,y,v,i,u,_,s,w,U,k,f,b,D,o,l,r,L,F,C,I,R,V,$,q,j,J,z,A,G,X=Ue,M,Y,ee;function te(...E){return e[1](e[3],e[4],e[5],...E)}function ae(){return e[2](e[3],e[4],e[5])}return{key:c,first:null,c(){t=m("div"),n=m("form"),h=m("input"),v=N(),i=m("input"),_=N(),s=m("button"),k=N(),f=m("form"),b=m("input"),o=N(),l=m("input"),L=N(),F=m("button"),C=N(),I=m("form"),R=m("input"),$=N(),q=m("button"),z=N(),this.h()},l(E){t=g(E,"DIV",{class:!0});var p=P(t);n=g(p,"FORM",{action:!0,method:!0});var S=P(n);h=g(S,"INPUT",{type:!0,name:!0,class:!0}),v=O(S),i=g(S,"INPUT",{type:!0,name:!0,class:!0}),_=O(S),s=g(S,"BUTTON",{class:!0,"aria-label":!0}),P(s).forEach(T),S.forEach(T),k=O(p),f=g(p,"FORM",{class:!0,action:!0,method:!0});var H=P(f);b=g(H,"INPUT",{type:!0,name:!0,class:!0}),o=O(H),l=g(H,"INPUT",{"aria-label":!0,type:!0,name:!0,class:!0}),L=O(H),F=g(H,"BUTTON",{class:!0,"aria-label":!0}),P(F).forEach(T),H.forEach(T),C=O(p),I=g(p,"FORM",{action:!0,method:!0});var K=P(I);R=g(K,"INPUT",{type:!0,name:!0,class:!0}),$=O(K),q=g(K,"BUTTON",{class:!0,"aria-label":!0}),P(q).forEach(T),K.forEach(T),z=O(p),p.forEach(T),this.h()},h(){a(h,"type","hidden"),a(h,"name","uid"),h.value=y=e[3].uid,a(h,"class","svelte-16nsat"),a(i,"type","hidden"),a(i,"name","done"),i.value=u=e[3].done?"":"true",a(i,"class","svelte-16nsat"),a(s,"class","toggle svelte-16nsat"),a(s,"aria-label",w="Mark todo as "+(e[3].done?"not done":"done")),a(n,"action","/todos?_method=PATCH"),a(n,"method","post"),a(b,"type","hidden"),a(b,"name","uid"),b.value=D=e[3].uid,a(b,"class","svelte-16nsat"),a(l,"aria-label","Edit todo"),a(l,"type","text"),a(l,"name","text"),l.value=r=e[3].text,a(l,"class","svelte-16nsat"),a(F,"class","save svelte-16nsat"),a(F,"aria-label","Save todo"),a(f,"class","text svelte-16nsat"),a(f,"action","/todos?_method=PATCH"),a(f,"method","post"),a(R,"type","hidden"),a(R,"name","uid"),R.value=V=e[3].uid,a(R,"class","svelte-16nsat"),a(q,"class","delete svelte-16nsat"),a(q,"aria-label","Delete todo"),q.disabled=j=e[3].pending_delete,a(I,"action","/todos?_method=DELETE"),a(I,"method","post"),a(t,"class","todo svelte-16nsat"),ne(t,"done",e[3].done),this.first=t},m(E,p){x(E,t,p),d(t,n),d(n,h),d(n,v),d(n,i),d(n,_),d(n,s),d(t,k),d(t,f),d(f,b),d(f,o),d(f,l),d(f,L),d(f,F),d(t,C),d(t,I),d(I,R),d(I,$),d(I,q),d(t,z),M=!0,Y||(ee=[Q(U=W.call(null,n,{pending:te})),Q(W.call(null,f)),Q(J=W.call(null,I,{pending:ae}))],Y=!0)},p(E,p){e=E,(!M||p&1&&y!==(y=e[3].uid))&&(h.value=y),(!M||p&1&&u!==(u=e[3].done?"":"true"))&&(i.value=u),(!M||p&1&&w!==(w="Mark todo as "+(e[3].done?"not done":"done")))&&a(s,"aria-label",w),U&&Z(U.update)&&p&1&&U.update.call(null,{pending:te}),(!M||p&1&&D!==(D=e[3].uid))&&(b.value=D),(!M||p&1&&r!==(r=e[3].text)&&l.value!==r)&&(l.value=r),(!M||p&1&&V!==(V=e[3].uid))&&(R.value=V),(!M||p&1&&j!==(j=e[3].pending_delete))&&(q.disabled=j),J&&Z(J.update)&&p&1&&J.update.call(null,{pending:ae}),p&1&&ne(t,"done",e[3].done)},r(){G=t.getBoundingClientRect()},f(){ce(t),X(),he(t,G)},a(){X(),X=_e(t,G,Oe,{duration:200})},i(E){M||(E&&fe(()=>{A||(A=le(t,se,{start:.7},!0)),A.run(1)}),M=!0)},o(E){E&&(A||(A=le(t,se,{start:.7},!1)),A.run(0)),M=!1},d(E){E&&T(t),E&&A&&A.end(),Y=!1,pe(ee)}}}function Ie(c){let e,t,n,h,y,v,i,u,_,s=[],w=new Map,U,k,f,b=c[0];const D=o=>o[3].uid;for(let o=0;o<b.length;o+=1){let l=oe(c,b,o),r=D(l);w.set(r,s[o]=ie(r,l))}return{c(){e=m("meta"),t=N(),n=m("div"),h=m("h1"),y=ve("Todos"),v=N(),i=m("form"),u=m("input"),_=N();for(let o=0;o<s.length;o+=1)s[o].c();this.h()},l(o){const l=me('[data-svelte="svelte-aw2gey"]',document.head);e=g(l,"META",{name:!0,content:!0}),l.forEach(T),t=O(o),n=g(o,"DIV",{class:!0});var r=P(n);h=g(r,"H1",{});var L=P(h);y=ge(L,"Todos"),L.forEach(T),v=O(r),i=g(r,"FORM",{class:!0,action:!0,method:!0});var F=P(i);u=g(F,"INPUT",{name:!0,"aria-label":!0,placeholder:!0,class:!0}),F.forEach(T),_=O(r);for(let C=0;C<s.length;C+=1)s[C].l(r);r.forEach(T),this.h()},h(){document.title="Todos",a(e,"name","description"),a(e,"content","A todo list app"),a(u,"name","text"),a(u,"aria-label","Add todo"),a(u,"placeholder","+ tap to add a todo"),a(u,"class","svelte-16nsat"),a(i,"class","new svelte-16nsat"),a(i,"action","/todos"),a(i,"method","post"),a(n,"class","todos svelte-16nsat")},m(o,l){d(document.head,e),x(o,t,l),x(o,n,l),d(n,h),d(h,y),d(n,v),d(n,i),d(i,u),d(n,_);for(let r=0;r<s.length;r+=1)s[r].m(n,null);U=!0,k||(f=Q(W.call(null,i,{result:Pe})),k=!0)},p(o,[l]){if(l&1){b=o[0],ke();for(let r=0;r<s.length;r+=1)s[r].r();s=be(s,l,D,1,o,b,w,n,we,ie,null,oe);for(let r=0;r<s.length;r+=1)s[r].a();ye()}},i(o){if(!U){for(let l=0;l<b.length;l+=1)Te(s[l]);U=!0}},o(o){for(let l=0;l<s.length;l+=1)Ee(s[l]);U=!1},d(o){T(e),o&&T(t),o&&T(n);for(let l=0;l<s.length;l+=1)s[l].d();k=!1,f()}}}const Pe=async({form:c})=>{c.reset()};function De(c,e,t){let{todos:n}=e;const h=(v,i,u,{data:_})=>{t(0,i[u].done=!!_.get("done"),n)},y=(v,i,u)=>t(0,i[u].pending_delete=!0,n);return c.$$set=v=>{"todos"in v&&t(0,n=v.todos)},[n,h,y]}class Ae extends re{constructor(e){super(),ue(this,e,De,Ie,de,{todos:0})}}export{Ae as default};
